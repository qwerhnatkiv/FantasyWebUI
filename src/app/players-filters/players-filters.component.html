<div class="player-filters-block">
  <div class="filters-row">
    <label class="filter-label">Цена от:</label>
    <mat-form-field class="filter-form">
      <mat-label>Price</mat-label>
      <mat-select
        [(value)]="lowerBoundPrice"
        (selectionChange)="lowerBoundPriceChanged()"
      >
        <mat-option>None</mat-option>
        <mat-option *ngFor="let price of prices" [value]="price">{{
          price
        }}</mat-option>
      </mat-select>
    </mat-form-field>
    <button
      (click)="lowerBoundPrice = undefined; lowerBoundPriceChanged()"
      [hidden]="lowerBoundPrice === undefined"
      class="clear-filter-button"
      mat-icon-button
      aria-label="Clear lower bound price filter"
    >
      <mat-icon>cancel</mat-icon>
    </button>
    <label class="filter-label" style="margin-left: 10px">до:</label>
    <mat-form-field class="filter-form">
      <mat-label>Price</mat-label>
      <mat-select
        [(value)]="upperBoundPrice"
        (selectionChange)="upperBoundPriceChanged()"
      >
        <mat-option>None</mat-option>
        <mat-option
          *ngFor="let price of prices"
          [value]="price"
          [disabled]="price < lowerBoundPrice!"
          >{{ price }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <button
      (click)="upperBoundPrice = undefined; upperBoundPriceChanged()"
      [hidden]="upperBoundPrice === undefined"
      class="clear-filter-button"
      mat-icon-button
      aria-label="Clear upper bound price filter"
    >
      <mat-icon>cancel</mat-icon>
    </button>

    <div class="vl"></div>

    <label class="filter-label" style="margin-left: 10px">Команды:</label>
    <mat-form-field>
      <mat-label>Teams</mat-label>
      <mat-select
        [formControl]="teamsFormControl"
        multiple
        (selectionChange)="teamsChanged()"
      >
        <mat-select-trigger>
          <span
            *ngIf="teamsFormControl.value?.length! <= 1"
            >{{teamsFormControl.value?.[0] || ''}}</span
          >
          <span *ngIf="teamsFormControl.value?.length! > 1"
            >{{ teamsFormControl.value?.length }} шт.</span
          >
        </mat-select-trigger>
        <mat-option (click)="selectAllTeams()">Select all</mat-option>
        <mat-option (click)="deselectAllTeams()">Deselect all</mat-option>
        <mat-option *ngFor="let team of selectTeams" [value]="team">{{
          team
        }}</mat-option>
      </mat-select>
    </mat-form-field>

    <button
      (click)="deselectAllTeams()"
      [hidden]="teamsFormControl.value?.length === 0"
      class="clear-filter-button"
      mat-icon-button
      aria-label="Clear teams filter"
    >
      <mat-icon>cancel</mat-icon>
    </button>

    <div class="vl"></div>
    <label class="filter-label" style="margin-left: 10px">Позиции:</label>
    <mat-form-field>
      <mat-label>Positions</mat-label>
      <mat-select
        [formControl]="positionsFormControl"
        multiple
        (selectionChange)="positionsChanged()"
      >
        <mat-option
          *ngFor="let position of selectPositions"
          [value]="position"
          >{{ position }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <button
      (click)="setDefaultPositions()"
      [hidden]="positionsFormControl.value?.length === 0"
      class="clear-filter-button"
      mat-icon-button
      aria-label="Clear positions filter"
    >
      <mat-icon>cancel</mat-icon>
    </button>

    <div class="vl"></div>
    <label class="filter-label" style="margin-left: 10px">ПП:</label>
    <mat-form-field>
      <mat-label>PP</mat-label>
      <mat-select
        [formControl]="powerPlayFormControl"
        multiple
        (selectionChange)="powerPlayUnitsChanged()"
      >
        <mat-option *ngFor="let powerPlay of selectPP" [value]="powerPlay">{{
          powerPlay
        }}</mat-option>
      </mat-select>
    </mat-form-field>
    <button
      (click)="powerPlayFormControl.setValue([]); powerPlayUnitsChanged()"
      [hidden]="powerPlayFormControl.value?.length === 0"
      class="clear-filter-button"
      mat-icon-button
      aria-label="Clear power play filter"
    >
      <mat-icon>cancel</mat-icon>
    </button>

    <label class="filter-label" style="margin-left: 30px">УЗ:</label>
    <mat-form-field class="filter-form">
      <mat-label>User</mat-label>
      <mat-select
        [(value)]="selectedUser"
        (selectionChange)="selectedUserChanged()"
      >
        <mat-option *ngFor="let user of selectUsers" [value]="user">{{
          user
        }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <mat-checkbox
        [(ngModel)]="playersAreNotPlayedDisabled"
      >Скрыть игроков с малым числом GP
  </mat-checkbox>
  <div class="choice-row">
    <img src="/assets/images/player-selected-first.png" class="selectedChoiceIcon" />
    <table class="choice-table">
      <thead>
        <tr>
          <th>Вариант 1:</th>
          <th>Цена</th>
          <th>ОФО</th>
          <th>Ц/ОФО</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center; vertical-align: middle">
            {{ firstChoiceOfo.playersCount }} игр.
          </td>
          <td style="text-align: center; vertical-align: middle">
            {{ firstChoiceOfo.priceSum | number : "1.0-0" }}
          </td>
          <td style="text-align: center; vertical-align: middle">
            {{ firstChoiceOfo.expectedFantasyPointsSum | number : "1.0-0" }}
          </td>
          <td style="text-align: center; vertical-align: middle">
            {{
              firstChoiceOfo.priceByExpectedFantasyPointsSum | number : "1.0-1"
            }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="choice-row">
    <img src="/assets/images/player-selected-second.png" class="selectedChoiceIcon" />
    <table class="choice-table">
      <thead>
        <tr>
          <th>Вариант 2:</th>
          <th>Цена</th>
          <th>ОФО</th>
          <th>Ц/ОФО</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center; vertical-align: middle">
            {{ secondChoiceOfo.playersCount }} игр.
          </td>
          <td style="text-align: center; vertical-align: middle">
            {{ secondChoiceOfo.priceSum | number : "1.0-0" }}
          </td>
          <td style="text-align: center; vertical-align: middle">
            {{ secondChoiceOfo.expectedFantasyPointsSum | number : "1.0-0" }}
          </td>
          <td style="text-align: center; vertical-align: middle">
            {{
              secondChoiceOfo.priceByExpectedFantasyPointsSum | number : "1.0-1"
            }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
