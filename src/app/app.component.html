<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://fonts.googleapis.com/css?family=Inter"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="filtersBlock">
      <mat-form-field>
        <mat-label>С: </mat-label>
        <input
          matInput
          [matDatepicker]="pickerFrom"
          [(ngModel)]="minFilterDate"
          (dateChange)="minFilterDate = $event.value!"
        />
        <mat-hint class="calendar-hint"></mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="pickerFrom"
        ></mat-datepicker-toggle>
        <mat-datepicker #pickerFrom></mat-datepicker> </mat-form-field
      ><mat-form-field>
        <mat-label>По: </mat-label>
        <input
          matInput
          [matDatepicker]="pickerTo"
          [(ngModel)]="maxFilterDate"
          (dateChange)="maxFilterDate = $event.value!"
        />
        <mat-hint class="calendar-hint"></mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="pickerTo"
        ></mat-datepicker-toggle>
        <mat-datepicker #pickerTo></mat-datepicker>
      </mat-form-field>
    </div>

    <div
      class="hideCalendarButton"
      (click)="this.isCalendarVisible = !this.isCalendarVisible"
    >
      Свернуть
    </div>

    <section class="example-container" tabindex="0">
      <table
        mat-table
        [dataSource]="dataSource!"
        [hidden]="!this.isCalendarVisible"
      >
        <ng-container matColumnDef="team" sticky>
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <div class="teamCell">{{ element["team"].displayValue }}</div>
          </td>
        </ng-container>

        <ng-container
          *ngFor="let column of columns"
          [matColumnDef]="column.header"
        >
          <th mat-header-cell *matHeaderCellDef>
            {{ column.header }}
          </th>
          <td
            mat-cell
            *matCellDef="let element"
            [ngClass]="
              minFilterDate != null &&
              maxFilterDate != null &&
              column.columnDef != null &&
              column.columnDef! >= minFilterDate &&
              column.columnDef! <= maxFilterDate
                ? 'calendar-cell-selected'
                : 'calendar-cell-not-selected'
            "
          >
            <div
              class="calendar-cell"
              [ngClass]="getCellTextClass(element[column.header])"
              [matTooltip]="generateCellToolTip(element[column.header].game)"
              matTooltipPosition="below"
              matTooltipClass="cellTooltip"
            >
              {{ element[column.header].displayValue }}
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
      </table>
    </section>
  </body>
</html>

<ngx-ui-loader></ngx-ui-loader>
